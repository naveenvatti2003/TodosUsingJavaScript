<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>
<style>
    .todos-bg-container{
        background-color: #f9fbfe;
        height: 100vh;
    }
    .heading{
        text-align:  center;
        font-family: "Roboto";
        font-size: 46px;
        font-weight: 900;
        margin-top: 20px;
        margin-bottom: 20px;
    }
    .task-heading{
        font-family: "Roboto";
        font-size: 32px;
        font-weight: 700;
        color: blue
    }
    .span-ele{
        font-family: "Roboto";
        font-size: 32px;
        font-weight: 500;
    }
    .user-input{
        background-color: white;
        width: 100%;
        border: 1px solid #e4e7eb;
        border-radius: 10px;
        height: 10%;
        padding: 20px;

    }
    .todos-button{
        color: white;
        background-color: #4c63b6;
        font-family: "Roboto";
        border-radius: 4px;
        margin-top: 20px;
        margin-bottom: 50px;
        padding-top: 5px;
        padding-bottom: 5px;
        padding-right: 20px;
        padding-left: 20px;
    }
    .mytask{
        font-family: "Roboto";
        font-size: 32px;
        font-weight: 700;
    }
    .誰tem-heading{
        font-family: "Roboto";
        font-size: 32px;
        font-weight: 500;
    }
    .誰tems-container{
        margin: 0px;
        padding: 0px;
    }
    .todo-item-container{
        margin-top: 15px;

    }
    .checkbox-input{
        width: 20px;
        height: 20px;
        margin-top: 12px;
        margin-bottom: 12px;

    }
    .label-container{
        background-color: #e6e6ff;
        width: 100%;
        border: 5px solid #096f92;
        border-right: none;
        border-top: none;
        border-bottom: none;
        border-radius: 4px;
        margin-left: 5px;
    }
    .checkbox-label{
        font-family: "Roboto";
        font-size: 16px;
        font-weight: 700;
        width: 82%;
        margin: 0px;
        padding-left: 20px;
        padding-right: 20px;
        padding-top: 10px;
        padding-bottom: 10px;

    }
    .delete-icon-container{
        text-align: right;
        width: 18%;
    }
    .delete-icon{
    font-size: 20px;
    color: #dc3545;
    cursor: pointer;
    
    padding-top: 25px;
    padding-right: 20px;
}
.checked{
    text-decoration: line-through;
}
</style>
<body>
    <div class="todos-bg-container">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h1 class="heading">Todos</h1>
                    <h1 class="task-heading">Create <span class="span-ele">Task</span></h1>
                    <input class="user-input" type="text" id="userInput" placeholder="Enter the Text"/>
                    <button class="todos-button" id="addTodo">Add</button>
                    <h1 class="mytask">My <span class="誰tem-heading">Tasks</span></h1>
                    <ul class="誰tems-container" id="itemsContainer"></ul>
                    <button class="todos-button" id="saveButton">Save</button>
                </div>
            </div>
        </div>
    </div>
    <script>
        let todosItemsContianer = document.getElementById('itemsContainer')
        let userInputElement = document.getElementById("userInput")
        let addTodoElement = document.getElementById("addTodo")
        let saveButton = document.getElementById('saveButton')

        function getTodoListFromLocalStorage(){
            let strifiedList = localStorage.getItem("todosList")
            let parsedTodoList = JSON.parse(strifiedList)
            if (parsedTodoList === null){
                return []
            }
            else{
                return parsedTodoList
            }
        }

        let todosList = getTodoListFromLocalStorage()

         function todoStatusChange(labelID){
            let labelElement = document.getElementById(labelID)
            labelElement.classList.toggle("checked")
        }
        function ondeleteItem(todoId){
            let deleteTodoItem = document.getElementById(todoId)
            todosItemsContianer.removeChild(deleteTodoItem)

            let todoIndex = todosList.findIndex(todo => "todo"+todo.id === todoId)
            todosList.splice(todoIndex, 1)
        }

        function onTodo(userInputElement){
            if (userInputElement.value===""){
                return alert('plese enter the value')
            }
            else{
                 let newTodo = {
                    text: userInputElement.value,
                    id: todosList.length+1
                }
                todosList.push(newTodo)
                createAndAddTodo(newTodo)
                userInputElement.value=""
            }
        }


        addTodoElement.onclick = function(){
            onTodo(userInputElement)
        }


        saveButton.onclick = function(){
            localStorage.setItem("todosList", JSON.stringify(todosList))
        }

         function createAndAddTodo(todo){
            let checkboxId = "checkbox"+todo.id
            let labelID = "label"+todo.id
            let todoId = "todo"+todo.id
             
             let todosElement = document.createElement('li')
             todosElement.classList.add("todo-item-container", "d-flex","flex-row")
             todosElement.id = todoId 
             todosItemsContianer.appendChild(todosElement)


             let inputElement = document.createElement('input')
             inputElement.type="checkbox"
             inputElement.id=checkboxId
             inputElement.classList.add("checkbox-input")
             inputElement.onclick = function(){
                todoStatusChange(labelID)
             }
             todosElement.appendChild(inputElement)


             let labelContainer = document.createElement("div")
             labelContainer.classList.add("label-container","d-flex","flex-row")
             todosElement.appendChild(labelContainer)

             let labelElement = document.createElement("label")
             labelElement.setAttribute("for",checkboxId)
             labelElement.classList.add("checkbox-label")
             labelElement.textContent = todo.text
             labelElement.id=labelID
             labelContainer.appendChild(labelElement)

             let deleteIconContainer = document.createElement("div")
             deleteIconContainer.classList.add("delete-icon-container")
             labelContainer.appendChild(deleteIconContainer)

             let deleteIcon = document.createElement("i")
             deleteIcon.classList.add("bi","bi-trash", "delete-icon")
             deleteIcon.onclick=function(){
                ondeleteItem(todoId)
             }
             deleteIconContainer.appendChild(deleteIcon)

         }
        for(let todo of todosList){
            createAndAddTodo(todo)
        }
    </script>
</body>
</html>